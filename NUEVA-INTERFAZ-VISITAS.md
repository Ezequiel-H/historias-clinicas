# ğŸ‰ Nueva Interfaz para Configurar Visitas

## âœ… Â¿QuÃ© cambiÃ³?

Ahora tenÃ©s **pÃ¡ginas completas dedicadas** para configurar las visitas y sus campos, en lugar de usar modales limitados.

---

## ğŸš€ Flujo Nuevo

### 1. **Crear/Editar Protocolo**
```
Protocolos â†’ Editar protocolo â†’ PestaÃ±a "Visitas y Campos"
```

### 2. **Agregar Visita**
```
Click en "Agregar Visita"
â†’ Modal simple: Nombre, Tipo, Orden
â†’ Guardar
```

### 3. **Configurar Campos de la Visita** â­ NUEVO
```
Click en el Ã­cono âš™ï¸ (engranaje) de la visita
â†’ TE LLEVA A UNA PÃGINA COMPLETA
â†’ Pantalla dedicada solo para esa visita
```

---

## ğŸ“º La Nueva Pantalla de ConfiguraciÃ³n

Cuando hacÃ©s click en **âš™ï¸ Configurar** en una visita, se abre una **pÃ¡gina completa**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Configurar Campos de Visita    [Guardar y Volver] â”‚
â”‚   Visita de Screening                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚  â„¹ï¸ ConfigurÃ¡ todos los campos/preguntas que    â”‚
â”‚     deben completarse en esta visita             â”‚
â”‚                                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚   Â¡EmpezÃ¡ agregando el primer campo!        â”‚â”‚
â”‚ â”‚                                              â”‚â”‚
â”‚ â”‚   [+ AGREGAR CAMPO / PREGUNTA]  â† GRANDE    â”‚â”‚
â”‚ â”‚                                              â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                  â”‚
â”‚  Campos Configurados (3)                         â”‚
â”‚                                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ â‰¡ 1. PresiÃ³n Arterial [Requerido] [Repetible]â”‚â”‚
â”‚ â”‚   NÃºmero con Rango                           â”‚â”‚
â”‚ â”‚   Unidad: mmHg | Rango: 90-180               â”‚â”‚
â”‚ â”‚                          [Editar] [Eliminar] â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ â‰¡ 2. Peso [Requerido]                       â”‚â”‚
â”‚ â”‚   NÃºmero Simple                              â”‚â”‚
â”‚ â”‚   Unidad: kg                                 â”‚â”‚
â”‚ â”‚                          [Editar] [Eliminar] â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                  â”‚
â”‚          [+ Agregar Otro Campo]                  â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Agregar un Campo - Dos Pasos Visuales

### Paso 1: Seleccionar Tipo de Campo

Cuando hacÃ©s click en **"Agregar Campo"**, se abre una nueva pantalla con TARJETAS VISUALES:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SeleccionÃ¡ el Tipo de Campo               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                           â”‚
â”‚  [ğŸ“ Texto Corto]    [ğŸ“ Texto Largo]    â”‚
â”‚  Campo de texto      Observaciones        â”‚
â”‚  de una lÃ­nea        clÃ­nicas             â”‚
â”‚                                           â”‚
â”‚  [ğŸ”¢ NÃºmero Simple]  [ğŸ”¢ NÃºmero Rango]   â”‚
â”‚  Peso, temperatura   PA con validaciÃ³n    â”‚
â”‚                                           â”‚
â”‚  [ğŸ”¢ NÃºmero Comp.]   [â˜‘ï¸ SelecciÃ³n Ãšnica]â”‚
â”‚  SistÃ³lica/DiastÃ³.   Estado: Bueno/Malo  â”‚
â”‚                                           â”‚
â”‚  [â˜‘ï¸ Sel. MÃºltiple]  [âš¡ SÃ­/No]          â”‚
â”‚  Varios sÃ­ntomas     Â¿Tuvo eventos?       â”‚
â”‚                                           â”‚
â”‚  [ğŸ“… Fecha]          [ğŸ• Hora]           â”‚
â”‚  Selector de fecha   Selector de hora     â”‚
â”‚                                           â”‚
â”‚  [ğŸ“… Fecha y Hora]   [ğŸ“ Archivo]        â”‚
â”‚  Momento exacto      PDF, imagen, etc.    â”‚
â”‚                                           â”‚
â”‚  [ğŸ“Š Tabla]                               â”‚
â”‚  MÃºltiples filas                          â”‚
â”‚                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Paso 2: Configurar el Campo

DespuÃ©s de elegir el tipo, se abre el **formulario de configuraciÃ³n**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Nuevo Campo                [Guardar Campo]â”‚
â”‚   ğŸ”¢ NÃºmero con Rango                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚ ConfiguraciÃ³n del Campo                     â”‚
â”‚                                             â”‚
â”‚ Nombre del Campo / Pregunta *              â”‚
â”‚ [PresiÃ³n Arterial                        ] â”‚
â”‚ Este es el texto que verÃ¡ el mÃ©dico        â”‚
â”‚                                             â”‚
â”‚ DescripciÃ³n o Instrucciones                â”‚
â”‚ [Tomar 3 mediciones con 5 min de         ]â”‚
â”‚ [separaciÃ³n y registrar cada una          ]â”‚
â”‚                                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                             â”‚
â”‚ Unidad de Medida                           â”‚
â”‚ [mmHg                                    ] â”‚
â”‚                                             â”‚
â”‚ Rango de Valores Permitidos                â”‚
â”‚ Valor MÃ­nimo    Valor MÃ¡ximo              â”‚
â”‚ [90          ]  [180                    ] â”‚
â”‚ El sistema validarÃ¡ que estÃ© en este rango â”‚
â”‚                                             â”‚
â”‚ Texto de Ayuda (Opcional)                  â”‚
â”‚ [Tomar en posiciÃ³n sentada, luego de     ]â”‚
â”‚ [5 minutos de reposo                      ]â”‚
â”‚                                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                             â”‚
â”‚ Opciones Adicionales                        â”‚
â”‚ â˜‘ Campo Requerido (obligatorio completar)  â”‚
â”‚ â˜‘ Permitir MÃºltiples Mediciones            â”‚
â”‚                                             â”‚
â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                             â”‚
â”‚ Vista Previa                                â”‚
â”‚ AsÃ­ se verÃ¡ cuando el mÃ©dico cargue:       â”‚
â”‚                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ PresiÃ³n Arterial * [Repetible]         â”‚â”‚
â”‚ â”‚ Tomar 3 mediciones con 5 min...        â”‚â”‚
â”‚ â”‚ [Campo: NÃºmero con Rango] (mmHg)       â”‚â”‚
â”‚ â”‚ Rango: 90 - 180                        â”‚â”‚
â”‚ â”‚ â„¹ï¸ Tomar en posiciÃ³n sentada...        â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ Tipos de Campos Disponibles

### âœ… Todos los que pediste:

1. **ğŸ“ Texto Corto** - Una lÃ­nea (ej: nombre medicaciÃ³n)
2. **ğŸ“ Texto Largo** - MÃºltiples lÃ­neas (ej: observaciones)
3. **ğŸ”¢ NÃºmero Simple** - Con unidad (ej: peso en kg)
4. **ğŸ”¢ NÃºmero con Rango** - Con validaciÃ³n mÃ­n/mÃ¡x
5. **ğŸ”¢ NÃºmero Compuesto** - MÃºltiples valores (sistÃ³lica/diastÃ³lica)
6. **â˜‘ï¸ SelecciÃ³n Ãšnica** - Lista de opciones (una sola)
7. **â˜‘ï¸ SelecciÃ³n MÃºltiple** - Lista de opciones (varias)
8. **âš¡ SÃ­/No** - Booleano simple
9. **ğŸ“… Fecha** - Selector de fecha
10. **ğŸ• Hora** - Selector de hora
11. **ğŸ“… Fecha y Hora** - Combinado
12. **ğŸ“ Archivo Adjunto** - Subir PDFs, imÃ¡genes
13. **ğŸ“Š Tabla Repetible** - MÃºltiples filas de datos

---

## ğŸ¯ Ventajas de la Nueva Interfaz

### âœ… MÃ¡s Espacio
- No estÃ¡s limitado por un modal chico
- Toda la pantalla para configurar
- PodÃ©s ver todo claramente

### âœ… MÃ¡s FÃ¡cil
- Tarjetas visuales para elegir tipo
- Vista previa en tiempo real
- Instrucciones claras

### âœ… Mejor OrganizaciÃ³n
- Lista clara de todos los campos
- FÃ¡cil de editar y eliminar
- Orden visual con nÃºmeros

### âœ… Workflow Natural
```
Protocolo â†’ Visitas â†’ Campos â†’ Configurar cada campo
```

---

## ğŸš€ Ejemplo Paso a Paso

### Escenario: Crear Visita de Screening

**1. Ir a protocolo**
```
Protocolos â†’ Editar "ABC-001" â†’ PestaÃ±a "Visitas y Campos"
```

**2. Crear la visita**
```
Click "Agregar Visita"
- Nombre: Visita de Screening
- Tipo: Presencial
- Orden: 1
Guardar
```

**3. Configurar campos**
```
Click en âš™ï¸ de "Visita de Screening"
â†’ SE ABRE PÃGINA COMPLETA
```

**4. Agregar PresiÃ³n Arterial**
```
Click "Agregar Campo"
â†’ Elegir "NÃºmero con Rango"
â†’ Completar:
  - Nombre: PresiÃ³n Arterial
  - Unidad: mmHg
  - Min: 90, Max: 180
  - â˜‘ Requerido
  - â˜‘ Permitir MÃºltiples
â†’ Guardar Campo
```

**5. Agregar Peso**
```
Click "Agregar Otro Campo"
â†’ Elegir "NÃºmero Simple"
â†’ Completar:
  - Nombre: Peso
  - Unidad: kg
  - â˜‘ Requerido
â†’ Guardar Campo
```

**6. Agregar ECG**
```
Click "Agregar Otro Campo"
â†’ Elegir "SelecciÃ³n Ãšnica"
â†’ Completar:
  - Nombre: Electrocardiograma
  - Opciones:
    Normal
    Anormal
  - â˜‘ Requerido
â†’ Guardar Campo
```

**7. Terminar**
```
Click "Guardar y Volver"
â†’ Vuelves al protocolo
â†’ La visita ya tiene 3 campos configurados âœ…
```

---

## ğŸ”„ Rutas Nuevas

```
/protocols/:id/edit
  â””â”€ pestaÃ±a "Visitas y Campos"
     â””â”€ Click en âš™ï¸ de una visita
        â””â”€ /protocols/:id/visits/:visitId/edit
           â””â”€ Click "Agregar Campo"
              â””â”€ /protocols/:id/visits/:visitId/activities/new
                 â””â”€ Elegir tipo â†’ Configurar â†’ Guardar
```

---

## âœ¨ Â¿CÃ³mo probarlo?

```bash
npm run dev
```

1. Login
2. Protocolos â†’ Editar uno
3. PestaÃ±a "Visitas y Campos"
4. Click en **âš™ï¸** de una visita
5. Â¡DisfrutÃ¡ de la nueva interfaz completa! ğŸ‰

---

## ğŸ“ Notas

- **Los datos siguen siendo mocks** (temporales)
- Cuando conectes el backend, funcionarÃ¡ igual
- Las visitas y campos se guardarÃ¡n en la base de datos
- El flujo visual ya estÃ¡ completo

---

## ğŸ¯ PrÃ³ximo: Fase 2 Completa

Con esta infraestructura, ya podemos crear:
- Interfaz para que mÃ©dicos carguen visitas
- Formularios dinÃ¡micos generados automÃ¡ticamente
- Basados en tu configuraciÃ³n visual

Â¿Continuamos? ğŸš€


